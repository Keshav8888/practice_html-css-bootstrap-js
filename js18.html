<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Checker</title>
    <link rel="stylesheet" href="./node_modules/bootstrap-icons/font/bootstrap-icons.css">

    <script>
        function Captcha() {
            var a = Math.random() * 10;
            var b = Math.random() * 10;
            var c = Math.random() * 10;
            var d = Math.random() * 10;
            var e = Math.random() * 10;
            var f = Math.random() * 10;
            return `${Math.round(a)} ${Math.round(b)} ${Math.round(c)} ${Math.round(d)} ${Math.round(e)} ${Math.round(f)}`;
        }
        function LoginClick() {
            var username = document.getElementById("UserName").value;
            var password = document.getElementById("Password").value;
            var msg = document.getElementById("msg");

            fetch("../data/users.json")
                .then(function (response) {
                    return response.json();
                })
                .then(function (users) {
                    for (var user of users) {
                        if (user.UserName == username && user.Password == password) {
                            document.write("<h2>Login Success</h2>");
                        } else {
                            msg.innerHTML = "Invalid User Name/Password";
                        }
                    }
                })
        }
        function bodyload() {
            document.getElementById("code").innerHTML = Captcha();
        }
        function GetNewCode() {
            document.getElementById("code").innerHTML = Captcha();
        }
    </script>

    <style>
        dd {
            margin-bottom: 10px;
        }
    </style>
</head>

<body onload="bodyload()">
    <fieldset>
        <legend>User Login</legend>
        <dl>
            <dt>User Name</dt>
            <dd><input type="text" id="UserName"></dd>
            <dt>Password</dt>
            <dd><input type="password" id="Password"></dd>
            <dt>Vreify Code <button onclick="GetNewCode()"><span class="bi bi-arrow-clockwise"></span></button></dt>
            <dd id="code"></dd>
            <dd><input type="text" size="6"></dd>
        </dl>
        <button onclick="LoginClick()">Login</button>
    </fieldset>
    <h2 id="msg" align="center"></h2>

</body>

</html>